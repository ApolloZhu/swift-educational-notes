<!doctype html><html lang=zh><meta charset=utf-8><meta name=generator content="Hugo 0.69.0"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=color-scheme content="light dark"><meta name=supported-color-schemes content="light dark"><title>@dynamicCallable 的实现要求&nbsp;&ndash;&nbsp;Swift 错误诊断教育性注释</title><link rel=stylesheet href=/swift-educational-notes/css/core.min.fbac162b495587fc8855f4edbce141da2f4dad8452e8d6f7bf70075aae1426bcd30f5ef1f1c8bf6b325eafb2e7739d95.css integrity=sha384-+6wWK0lVh/yIVfTtvOFB2i9NrYRS6Nb3v3AHWq4UJrzTD17x8ci/azJer7Lnc52V><link rel=apple-touch-icon sizes=180x180 href=https://apollozhu.github.io/swift-educational-notes/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://apollozhu.github.io/swift-educational-notes/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://apollozhu.github.io/swift-educational-notes/favicon-16x16.png><link rel=manifest href=https://apollozhu.github.io/swift-educational-notes/site.webmanifest><link rel=mask-icon href=https://apollozhu.github.io/swift-educational-notes/safari-pinned-tab.svg color=#5bbad5><meta name=apple-mobile-web-app-status-bar-style content="black-translucent"><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><meta property="og:site_name" content="Swift 错误诊断教育性注释"><meta property="og:title" content="@dynamicCallable 的实现要求"><meta property="og:description" content="Swift 错误诊断教育性注释"><meta property="og:image" content="https://apollozhu.github.io/swift-educational-notes/icon.png"><meta property="og:url" content="https://apollozhu.github.io/swift-educational-notes/dynamic-callable-requirements/"><meta name=twitter:site content="@zhuzhiyu_"><meta property="og:type" content="article"><body><div class=base-body><section id=header class="site header"><div class="header wrap"><span class="header left-side"><a class="site home" href=/swift-educational-notes/><img class="site logo" src=/swift-educational-notes/icon.png alt><span class="site name">Swift 错误诊断教育性注释</span></a></span>
<span class="header right-side"><div class="nav wrap"><nav class=nav><a class="nav item" href=/swift-educational-notes/about/>关于</a><a class="nav item" href=https://github.com/ApolloZhu/swift-educational-notes target=_blank>GitHub</a></nav></div></span></div></section><div id=content><div class=article-container><section class="article header"><h1 class="article title"><code>@dynamicCallable</code> 的实现要求</h1><p class="article date">2020-01-13<span class=langs>
<span class=lang><a href=https://github.com/apple/swift/blob/master/userdocs/diagnostics/dynamic-callable-requirements.md target=_blank>英文原文</a></span></span></p></section><article class="article markdown-body"><p>如果用修饰符<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> <code>@dynamicCallable</code> 标记一个类型，那它还必须要实现 <code>dynamicallyCall(withArguments:)</code> 和/或 <code>dynamicallyCall(withKeywordArguments:)</code> 方法，否则会导致编译错误。需要注意的是，必须要实现 <code>dynamicallyCall(withKeywordArguments:)</code> 才能在调用时使用关键字参数/实际参数标签。</p><p>有效的 <code>dynamicallyCall(withArguments:)</code> 实现必须：</p><ul><li>是一个实例方法，而不是 <code>static</code> 或者 <code>class</code> 方法。</li><li>接受一个类型遵循 <code>ExpressibleByArrayLiteral</code> 协议的参数——通常这会是 Swift 自带的 <code>Array</code> 类型。</li><li>返回一个有效的类型。</li></ul><p>有效的 <code>dynamicallyCall(withKeywordArguments:)</code> 实现必须：</p><ul><li>是一个实例方法，而不是 <code>static</code> 或者 <code>class</code> 方法。</li><li>接受一个类型遵循 <code>ExpressibleByDictionaryLiteral</code> 协议的参数。这个可以是 <code>Dictionary</code>、<code>KeyValuePairs</code>（用于支持重复的关键字参数）或者其他遵循该协议的类型。</li><li>让参数类型的关联类型 <code>Key</code> 遵循 <code>ExpressibleByStringLiteral</code> 协议。这个会是参数关键字的类型。</li><li>让参数类型的关联类型 <code>Value</code> 以及返回类型为有效的类型。</li></ul><section class=footnotes role=doc-endnotes><hr><ol><li id=fn:1 role=doc-endnote><p>attribute，又译作“特性”。 <a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></section></article><section class="article license">许可协议：<a href=https://github.com/apple/swift/blob/master/LICENSE.txt target=_blank>Apache 2.0 许可+运行时特许</a></section></div><section class="article navigation"><p><a class=link href=/swift-educational-notes/property-wrapper-requirements/><span class=li>&larr;</span>属性包装器的实现要求</a></p><p><a class=link href=/swift-educational-notes/complex-closure-inference/><span class=li>&rarr;</span>推断闭包类型</a></p></section><section class="article discussion"><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"apollonian"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div><section id=footer class=footer><div class=footer-wrap><p class=copyright>Copyright © 2020 <a href=https://apollozhu.github.io>Apollo Zhu</a></p><p class=powerby><span>Powered by </span><a href=https://gohugo.io target=_blank>Hugo</a><span> and the </span><a href=https://themes.gohugo.io/hugo-notepadium/ target=_blank>Notepadium</a></p></div></section><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-72767473-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></div></body></html>