<!doctype html><html lang=zh><meta charset=utf-8><meta name=generator content="Hugo 0.69.0"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=color-scheme content="light dark"><meta name=supported-color-schemes content="light dark"><title>关于 Swift 错误诊断的教育文档&nbsp;&ndash;&nbsp;Swift 错误诊断教育文档</title><link rel=stylesheet href=/swift-educational-notes/css/core.min.2003afad56d7b42c59867ffd3e677b467afb3400dc030f23e11957d149790febfe528e751648c45c47855a339efd5116.css integrity=sha384-IAOvrVbXtCxZhn/9Pmd7Rnr7NADcAw8j4RlX0Ul5D+v+Uo51FkjEXEeFWjOe/VEW><body><div class=base-body><section id=header class="site header"><div class="header wrap"><span class="header left-side"><a class="site home" href=/swift-educational-notes/><span class="site name">Swift 错误诊断教育文档</span></a></span>
<span class="header right-side"><div class="nav wrap"><nav class=nav><a class="nav item" href=/swift-educational-notes/about/>关于</a><a class="nav item" href=https://github.com/ApolloZhu/swift-educational-notes target=_blank>GitHub</a></nav></div></span></div></section><div id=content><div class=article-container><section class="article header"><h1 class="article title">关于 Swift 错误诊断的教育文档</h1><p class="article date">2019-11-07<span class=lastmod> • 更新于 2020-03-27</span></p></section><article class="article markdown-body"><h2 id=教育文档>教育文档</h2><p>Educational notes are short-form documentation attached to a diagnostic which explain relevant language concepts. They are intended to further Swift&rsquo;s goal of progressive disclosure by providing a learning resource at the point of use when encountering an error message for the first time. 在极少数的情况下，他们还允许主要的诊断消息使用更专业的术语，而不用担心像“名义类型”（nominal type）这样的词会对新手不够友好。</p><p>When outputting diagnostics on the command line, educational notes will be printed after the main diagnostic body if enabled using the <code>-print-educational-notes</code> driver option. When presented in an IDE, it&rsquo;s expected they will be collapsed under a disclosure arrow, info button, or similar to avoid cluttering output.</p><p>Educational notes should:</p><ul><li>Explain a single language concept. This makes them easy to reuse across related diagnostics and helps keep them clear, concise, and easy to understand.</li><li>Be written in unabbreviated English. These are longer-form messages compared to the main diagnostic, so there&rsquo;s no need to omit needless words and punctuation.</li><li>Not generally exceed 3-4 paragraphs. Educational notes should be clear and easily digestible. Messages which are too long also have the potential to create UX issues on the command line.</li><li>Be accessible. Educational notes should be beginner friendly and avoid assuming unnecesary prior knowledge. The goal is not only to help users understand what a diagnostic is telling them, but also to turn errors and warnings into &ldquo;teachable moments&rdquo;.</li><li>Include references to relevant chapters of <em>The Swift Programming Language</em>.</li><li>Be written in Markdown, but avoid excessive markup which negatively impacts the terminal UX.</li></ul><h2 id=quick-start-guide-for-contributing-new-educational-notes>Quick-Start Guide for Contributing New Educational Notes</h2><p>Adding new educational notes is a great way to get familiar with the process of contributing to Swift, while also making a big impact!</p><p>To add a new educational note:</p><ol><li>Follow the <a href=https://github.com/apple/swift#getting-sources-for-swift-and-related-projects target=_blank>directions in the README</a> to checkout the Swift sources locally. Being able to build the Swift compiler is recommended, but not required, when contributing a new note.</li><li>Identify a diagnostic to write an educational note for. To associate an educational note with a diagnostic name, you&rsquo;ll need to know its internal identifier. The easiest way to do this is to write a small program which triggers the diagnostic, and run it using the <code>-debug-diagnostic-names</code> compiler flag. This flag will cause the internal diagnostic identifier to be printed after the diagnostic message in square brackets.</li><li>Find any closely related diagnostics. Sometimes, what appears to be one diagnostic from a user&rsquo;s perspective may have multiple variations internally. After determining a diagnostic&rsquo;s internal identifier, run a search for it in the compiler source. You should find:<ul><li>An entry in a <code>Diagnostics*.def</code> file describing the diagnostic. If there are any closely related diagnostics the note should also be attached to, they can usually be found nearby.</li><li>Each point in the compiler source where the diagnostic is emitted. This can be helpful in determining the exact circumstances which cause it to be emitted.</li></ul></li><li>Add a new Markdown file in the <code>userdocs/diagnostics/</code> directory in the swift repository containing the contents of the note. When writing a note, keep the writing guidelines from the section above in mind. The existing notes in the directory are another useful guide.</li><li>Associate the note with the appropriate diagnostics in <code>EducationalNotes.def</code>. An entry like <code>EDUCATIONAL_NOTES(property_wrapper_failable_init, "property-wrapper-requirements.md")</code> will associate the note with filename <code>property-wrapper-requirements.md</code> with the diagnostic having an internal identifier of <code>property_wrapper_failable_init</code>.</li><li>If possible, rebuild the compiler and try recompiling your test program with <code>-print-educational-notes</code>. Your new note should appear after the diagnostic in the terminal.</li><li>That&rsquo;s it! The new note is now ready to be submitted as a pull request on GitHub.</li></ol><p>If you run into any issues or have questions while following the steps above, feel free to post a question on the Swift forums or open a work-in-progress pull request on GitHub.</p></article><section class="article license">许可协议：<a href=https://github.com/apple/swift/blob/master/LICENSE.txt target=_blank>Apache 2.0 许可+运行时特许</a></section></div><section class="article discussion"><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"apollonian"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div><section id=footer class=footer><div class=footer-wrap><p class=copyright>Copyright © 2020 Apollo Zhu</p><p class=powerby><span>Powered by </span><a href=https://gohugo.io target=_blank>Hugo</a><span> and the </span><a href=https://themes.gohugo.io/hugo-notepadium/ target=_blank>Notepadium</a></p></div></section><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-72767473-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></div></body></html>