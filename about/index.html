<!doctype html><html lang=zh><meta charset=utf-8><meta name=generator content="Hugo 0.69.0"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=color-scheme content="light dark"><meta name=supported-color-schemes content="light dark"><title>关于 Swift 错误诊断的教育注释&nbsp;&ndash;&nbsp;Swift 错误诊断教育注释</title><link rel=stylesheet href=/swift-educational-notes/css/core.min.ac866c7a8c660b15d3b9ad1c02ac572fde60ce20557d52d6e50e67f697c7c37feeadbc10696aa1c263aabfadd6b0b921.css integrity=sha384-rIZseoxmCxXTua0cAqxXL95gziBVfVLW5Q5n9pfHw3/urbwQaWqhwmOqv63WsLkh><link rel=apple-touch-icon sizes=180x180 href=https://apollozhu.github.io/swift-educational-notes/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://apollozhu.github.io/swift-educational-notes/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://apollozhu.github.io/swift-educational-notes/favicon-16x16.png><link rel=manifest href=https://apollozhu.github.io/swift-educational-notes/site.webmanifest><link rel=mask-icon href=https://apollozhu.github.io/swift-educational-notes/safari-pinned-tab.svg color=#5bbad5><meta name=apple-mobile-web-app-status-bar-style content="black-translucent"><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><body><div class=base-body><section id=header class="site header"><div class="header wrap"><span class="header left-side"><a class="site home" href=/swift-educational-notes/><img class="site logo" src=/swift-educational-notes/icon.png alt><span class="site name">Swift 错误诊断教育注释</span></a></span>
<span class="header right-side"><div class="nav wrap"><nav class=nav><a class="nav item" href=/swift-educational-notes/about/>关于</a><a class="nav item" href=https://github.com/ApolloZhu/swift-educational-notes target=_blank>GitHub</a></nav></div></span></div></section><div id=content><div class=article-container><section class="article header"><h1 class="article title">关于 Swift 错误诊断的教育注释</h1><p class="article date">2019-11-07<span class=lastmod> • 更新于 2020-03-27</span></p></section><article class="article markdown-body"><blockquote><p>译者注：简单来说，如果普通的编译器会告诉你：</p><blockquote><p>“你的苹果掉地上了，要不尝试把它捡起来？”</p></blockquote><p>那与之对应的教育注释就会是《万有引力简述》。</p></blockquote><h2 id=教育注释>教育注释</h2><p>教育注释是附在诊断中用于解释相关语言概念的简短文档。They are intended to further Swift&rsquo;s goal of progressive disclosure by providing a learning resource at the point of use when encountering an error message for the first time.在极少数的情况下，他们还允许主要的诊断消息使用更专业的术语，而不用担心像“名义类型”（nominal type）这样的词会对新手不够友好。</p><p>When outputting diagnostics on the command line, educational notes will be printed after the main diagnostic body if enabled using the <code>-print-educational-notes</code> driver option. When presented in an IDE, it&rsquo;s expected they will be collapsed under a disclosure arrow, info button, or similar to avoid cluttering output.</p><p>教育注释应该：</p><ul><li>解释单个语言概念。这样就能把它们在多个诊断之间共享，并保持清楚、简洁、明了。</li><li>使用完整的（英文）句子。和主要的诊断信息相比，教育注释为更长的格式，因此没有比较省略字词或标点符号。</li><li>一般不超过 3 至 4 个自然段。Educational notes should be clear and easily digestible. Messages which are too long also have the potential to create UX issues on the command line.</li><li>应该简单易懂。Educational notes should be beginner friendly and avoid assuming unnecesary prior knowledge. The goal is not only to help users understand what a diagnostic is telling them, but also to turn errors and warnings into &ldquo;teachable moments&rdquo;.</li><li>包含《The Swift Programming Language》里相关章节的链接。</li><li>使用 Markdown 格式编写，但避免使用多余的标记对终端用户体验产生负面影响。</li></ul><h2 id=如何贡献新的英文教育注释>如何贡献新的（英文）教育注释</h2><p>Adding new educational notes is a great way to get familiar with the process of contributing to Swift, while also making a big impact!</p><p>添加一个新教育注释的步骤如下：</p><ol><li>Follow the <a href=https://github.com/apple/swift#getting-sources-for-swift-and-related-projects target=_blank>directions in the README</a> to checkout the Swift sources locally. Being able to build the Swift compiler is recommended, but not required, when contributing a new note.</li><li>Identify a diagnostic to write an educational note for. To associate an educational note with a diagnostic name, you&rsquo;ll need to know its internal identifier. The easiest way to do this is to write a small program which triggers the diagnostic, and run it using the <code>-debug-diagnostic-names</code> compiler flag. This flag will cause the internal diagnostic identifier to be printed after the diagnostic message in square brackets.</li><li>Find any closely related diagnostics. Sometimes, what appears to be one diagnostic from a user&rsquo;s perspective may have multiple variations internally. After determining a diagnostic&rsquo;s internal identifier, run a search for it in the compiler source. You should find:<ul><li>An entry in a <code>Diagnostics*.def</code> file describing the diagnostic. If there are any closely related diagnostics the note should also be attached to, they can usually be found nearby.</li><li>Each point in the compiler source where the diagnostic is emitted. This can be helpful in determining the exact circumstances which cause it to be emitted.</li></ul></li><li>Add a new Markdown file in the <a href=https://github.com/apple/swift/tree/master/userdocs/diagnostics target=_blank><code>userdocs/diagnostics/</code></a> directory in the swift repository containing the contents of the note. When writing a note, keep the writing guidelines from the section above in mind. The existing notes in the directory are another useful guide.</li><li>Associate the note with the appropriate diagnostics in <code>EducationalNotes.def</code>. An entry like <code>EDUCATIONAL_NOTES(property_wrapper_failable_init, "property-wrapper-requirements.md")</code> will associate the note with filename <code>property-wrapper-requirements.md</code> with the diagnostic having an internal identifier of <code>property_wrapper_failable_init</code>.</li><li>If possible, rebuild the compiler and try recompiling your test program with <code>-print-educational-notes</code>. Your new note should appear after the diagnostic in the terminal.</li><li>That&rsquo;s it! The new note is now ready to be submitted as a pull request on GitHub.</li></ol><p>如果你在完成上面步骤的时候遇到了困难或者有任何的问题，欢迎在 Swift 论坛发帖提问，或者在 GitHub 提交一个合并拉取请求草稿。</p></article><section class="article license">许可协议：<a href=https://github.com/apple/swift/blob/master/LICENSE.txt target=_blank>Apache 2.0 许可+运行时特许</a></section></div><section class="article discussion"><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"apollonian"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div><section id=footer class=footer><div class=footer-wrap><p class=copyright>Copyright © 2020 Apollo Zhu</p><p class=powerby><span>Powered by </span><a href=https://gohugo.io target=_blank>Hugo</a><span> and the </span><a href=https://themes.gohugo.io/hugo-notepadium/ target=_blank>Notepadium</a></p></div></section><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-72767473-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></div></body></html>